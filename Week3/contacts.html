<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" href="img/favicon-16x16.png">
    <link rel="shortcut icon" href="img/favicon-16x16.png" type="image/x-icon">
    <title>Subscribe page</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="src/lodash.min.js"></script>
    <script src="src/low.min.js"></script>
    <script src="src/LocalStorage.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col"></div>
            <div class="col-10">
            <div class="card">
                <img class="card-img-top" src="img/SmartBrands_FinalLogo.jpg" alt="">
                <div class="card-body">
                    <h4 class="card-title">Please, leave your contact details</h4>
                    <!-- <p class="card-text">Text</p> 64 +20; 64 + 21; 64 + 22; 64 + 27; 64 + 28; 64 + 29 --> 
                    <div class="form-group">
                            <form action="#" method="post">
                                <small id="helpId" class="form-text text-muted">Please provide your contact name</small>
                                <input type="text" class="form-control" name="name" id="name" aria-describedby="helpId" placeholder="John Smith" size="40" required pattern="^[a-zA-Z][a-zA-Z ]{1,40}$">
                                <small id="helpId" class="form-text text-muted">Your contact phone number</small>
                                <input type="tel" class="form-control" name="phone" id="phone" aria-describedby="helpId" size="15" value="" placeholder="020 555 1245" required>
                                <small id="emailHelpId" class="form-text text-muted">Your email</small>
                                <input type="email" class="form-control" name="email" id="email" aria-describedby="emailHelpId" placeholder="john@yahoo.co.nz" required>
                                <div class="btn-group" data-toggle="buttons">
                                    <label class="btn btn-link active" id='chklink' 
                                    data-toggle="modal" data-target="#myModal" 
                                    alt="By clicking submit, you are in agreement with the Terms&amp;Conditions">
                                        <input type="checkbox" name="chkagree" id="chkagree" checked="" autocomplete="on">
                                        I agree to Privacy Policy terms
                                    </label>
                                </div>
                                <!-- primary|secondary|success|danger|warning|info|light|dark|link                 -->
                                <button type="submit" class="btn btn-success" id="add">Subscribe</button>
                            </form>
                    </div>  
                </div>
            </div>
        </div>
        <div class="col"></div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="myModalLongTitle">Privacy Policy terms</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <p>
                    This privacy policy explains how we may collect, store, use, and disclose any personal information that you provide to us when using this website. Your continued use of this website provides your unconditional consent to us collecting, storing, using, and disclosing your personal information in the manner set out below. This privacy policy is subject to, and must be read in conjunction with, our Terms of Use.
                </p>

                <h6>    General</h6>
                <p>
                    In this privacy policy ‘we’, ‘us’, and ‘our’ refers to the SmartBrands.
                </p>    
                <h6>    Collection</h6>
                <p>
                    We may collect your personal information (including, without limitation, your name, email address, phone number, and postal address) when you use this website.  You may decide not to provide your personal information to us. However, if you do not provide it, we may not be able to provide you with access to certain information or services.
                </p>    
                <h6>    Automated collection</h6>
                <p>
                    When you visit our website, we may use automated technology (such as usage monitoring software, cookies, and sessions) to collect and store certain information about your visit. Please see the Cookies for more information.
                </p>    
                <h6>    Use and disclosure</h6>
                <p>
                    We will not use or disclose your personal information except in accordance with the New Zealand Privacy Act 1993.  We may use your personal information to:
                    
                    verify your identity and to assist you if you forget your username or password for any of the services we provide to you via the Internet;
                    communicate with you;
                    analyse usage of this website;
                    provide you with further information, news, and promotional material; and
                    improve the content of this website and to customise this website to your preferences.
                    We will not sell, rent, or lease your personal information to third parties.  Your personal information will be made available internally for the above purposes and we may also disclose your personal information to third parties, who have agreed to treat your personal information in accordance with this privacy policy, for similar purposes. By providing us with your personal information, you consent to our using and disclosing your personal information in the manner set out above.
                    
                    We will only use or disclose personal information that you have provided to us, or which we have obtained about you:
                      
                    for the above-mentioned purposes;
                    
                    if you have authorised us to do so;
                    if we have given you notification of the intended use or disclosure and you have not objected to that use or disclosure;
                    if we believe that the use or disclosure is reasonably necessary to assist a law enforcement agency or an agency responsible for national security in the performance of their functions;
                    if we believe that the use or disclosure is reasonably necessary to enforce any legal rights we may have, or is reasonably necessary to protect the rights, property and safety of us, our customers, or others; or
                    if we are authorised, required or permitted by law to disclose the information.
                    Storage and security
                    Personal information collected on this website is collected and held by Tourism New Zealand. We will take reasonable efforts to protect personal information that is held by us from loss, misuse, unauthorised access, disclosure, alteration, or destruction.   
                    
                    Third party websites
                    This website may contain hyperlinks to third party websites. We are not responsible for the content of such websites, or for the manner in which those websites collect, hold, use, and distribute any personal information you provide.  When visiting a third party website from hyperlinks displayed on this website, we encourage you to review the privacy statements of those websites so that you can understand how the personal information you provide will be will collected, held, used and distributed.  
                    
                    Right to access and correct
                    You may request access to, or correction of, any personal information we hold about you by contacting our privacy officer at privacypolicy@tnz.govt.nz
                    
                    To ensure that the personal information we hold about you is accurate and current, please notify us of any changes to your personal information as soon as possible.
                </p>    
                <h6>    Changes to our Privacy Policy</h6>
                <p>
                    We reserve the right, at our discretion, to update or revise this privacy policy at any time. Changes to this privacy policy will take effect immediately once published on this website.  Please check this privacy policy regularly for modifications and updates.  If you continue to use this website or if you provide any personal information after we post changes to this privacy policy, this will indicate your acceptance of any such changes.
                </p>
                <p>      
                    This privacy policy was last updated on 07 May 2018.
                </p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal" name="btnagree" onclick="document.getElementById('chkagree').checked=true;">Agree</button>
            </div>
          </div>
        </div>
      </div>
    <script>
        const adapter = new LocalStorage('db')
        const db = low(adapter)

        db.defaults({ customers: [] })
        .write()

        function add() {
            let customer = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                data: Date.now()
            };
            let chk = document.getElementById('chkagree').checked;

            if (chk==false || customer.name==='' || customer.phone===''|| customer.email==='') {
                return false;    
            }
            db.get('customers')
            .push(customer)
            .write()

            console.log(customer);
            
            document.getElementById('name').value='';
            document.getElementById('phone').value='';
            document.getElementById('email').value='';

        }
        function showagree(){
            let ttl = document.getElementById('myModalLongTitle');
            let cc= db.getState();
            ttl.innerText='Privacy Policy terms '+'('+cc.customers.length+')' ;
            $('#myModal').modal('show');
            console.log(ttl.innerText);
        }

        var email = document.querySelector('input[name="email"]');
        email.setCustomValidity('Need your email bro!');

        email.addEventListener('input', function () {
        if (this.value.trim() === '') {
            this.setCustomValidity('Need your email bro!');
        }
        else {
            this.setCustomValidity('');
        }
        }, false);

        email.addEventListener('invalid', function () {
        if (this.value.trim() !== '') {
            this.setCustomValidity("'" + this.value + "' is not a valid email bro!");
        }
        }, false); 

        document.getElementById('add').onclick = function() {
        add()
        }
        document.getElementById('chklink').onclick = function() {
        showagree()
        }

    </script>
    <script src="src/jquery-3.3.1.slim.min.js"></script>
    <script src="src/popper.min.js"></script>
    <script src="src/bootstrap.min.js"></script>
</body>
</html>